function windowOpen(e){e.classList.add("modal__window--show"),modal.classList.add("modal--show")}function windowClose(e){e.classList.remove("modal__window--show"),modal.classList.remove("modal--show")}var overlay=document.querySelector(".modal__overlay"),modal=document.querySelector(".modal"),feedback_link=document.querySelector(".js-feedback"),feedback_popup=document.querySelector(".feedback-form");if(feedback_popup){var feedback_close=modal.querySelector(".modal__close"),feedback_form=feedback_popup,feedback_form_name=feedback_form.querySelector("#id-name"),feedback_form_email=feedback_form.querySelector("#id-email"),feedback_form_mailbody=feedback_form.querySelector("#id-mailbody"),storage_name=localStorage.getItem("feedback_form_name"),storage_email=localStorage.getItem("feedback_form_email"),storage_mailbody=localStorage.getItem("feedback_form_mailbody");feedback_link.addEventListener("click",function(e){e.preventDefault(),windowOpen(feedback_popup),storage_name?(feedback_form_name.value=storage_name,storage_email?(feedback_form_email.value=storage_email,feedback_form_mailbody.focus()):feedback_form_email.focus()):feedback_form_name.focus()}),feedback_close.addEventListener("click",function(e){e.preventDefault(),feedback_popup.classList.contains("modal__window--show")&&(modal.classList.remove("modal-error"),feedback_form_name.classList.remove("field-error"),feedback_form_email.classList.remove("field-error"),feedback_form_mailbody.classList.remove("field-error"),windowClose(feedback_popup))}),feedback_form.addEventListener("submit",function(e){feedback_form_name.value&&feedback_form_email.value&&feedback_form_mailbody.value?(localStorage.setItem("feedback_form_name",feedback_form_name.value),localStorage.setItem("feedback_form_email",feedback_form_email.value),localStorage.setItem("feedback_form_mailbody",feedback_form_mailbody.value)):(e.preventDefault(),modal.classList.remove("modal-error"),modal.offsetWidth=feedback_popup.offsetWidth,modal.classList.add("modal-error"),feedback_form_name.value||(feedback_form_name.classList.remove("field-error"),feedback_form_name.offsetWidth=feedback_form_name.offsetWidth,feedback_form_name.classList.add("field-error")),feedback_form_email.value||(feedback_form_email.classList.remove("field-error"),feedback_form_email.offsetWidth=feedback_form_email.offsetWidth,feedback_form_email.classList.add("field-error")),feedback_form_mailbody.value||(feedback_form_mailbody.classList.remove("field-error"),feedback_form_mailbody.offsetWidth=feedback_form_mailbody.offsetWidth,feedback_form_mailbody.classList.add("field-error")))})}var map_link=document.querySelector(".js-map"),map_popup=document.querySelector(".map");if(map_popup){var map_close=modal.querySelector(".modal__close");map_link.addEventListener("click",function(e){e.preventDefault(),windowOpen(map_popup)}),map_close.addEventListener("click",function(e){e.preventDefault(),windowClose(map_popup)})}window.addEventListener("keydown",function(e){27===e.keyCode&&(feedback_popup&&feedback_popup.classList.contains("modal__window--show")&&(modal.classList.remove("modal-error"),feedback_form_name.classList.remove("field-error"),feedback_form_email.classList.remove("field-error"),feedback_form_mailbody.classList.remove("field-error"),windowClose(feedback_popup)),map_popup&&map_popup.classList.contains("modal__window--show")&&windowClose(map_popup))}),overlay.addEventListener("click",function(){feedback_popup&&feedback_popup.classList.contains("modal__window--show")&&(modal.classList.remove("modal-error"),feedback_form_name.classList.remove("field-error"),feedback_form_email.classList.remove("field-error"),feedback_form_mailbody.classList.remove("field-error"),windowClose(feedback_popup)),map_popup&&map_popup.classList.contains("modal__window--show")&&windowClose(map_popup)});
